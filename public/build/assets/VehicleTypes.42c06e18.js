import{r as j,a as m,o as u,l as T,w as c,b as o,e as s,t as p,d as e,s as w,i as B,c as _,f as $,n as S,u as F,j as D,H as I,F as E,h as H}from"./app.cea855f7.js";import{_ as O}from"./Authenticated.d169710d.js";import{T as Y}from"./Table.c99bc67c.js";import{_ as k}from"./Actions.5787c160.js";import{_ as C}from"./Input.50e47f58.js";import{_ as N}from"./Label.a97b3341.js";import{_ as y}from"./Button.06d19c4a.js";import{u as A}from"./vehicle.7e87c24e.js";import{u as z}from"./useAlerts.6e7215ec.js";import{_ as L}from"./Pagination.765da988.js";const M={class:"text-h6"},q={for:"inputTag",class:"cursor-pointer bg-gray-200 py-2 px-2 rounded-lg flex justify-start items-center space-x-2"},G={key:0,id:"imageName",class:"text-black"},J={key:1},K={key:0,class:"text-xs mx-1 mt-1 text-red-500"},P={key:1,class:"text-xs mx-1 mt-1 text-red-500"},Q={class:"flex items-center justify-end mt-6"},R=s("p",{class:"text-[#161515]"},"Cancel",-1),W={__name:"AddVehicle",setup(d){const t=A();j({});const h=()=>{t.form.post(route("vehicles.store",{id:t.form.city_id}),{preserveScroll:!0,onSuccess:()=>{t.form.reset(),t.dialog=!1},onFinish:()=>{t.form.reset()}})},a=v=>{const n=v.target.files[0];t.fileName=n.name,t.form.image=n};function b(){t.form.post(route("vehicles.update",{id:t.form.id}),{preserveScroll:!0,onSuccess:()=>{t.form.reset(),t.dialog=!1}})}return(v,n)=>{const g=m("v-card-title"),V=m("v-icon"),f=m("v-container"),r=m("v-card"),x=m("v-dialog");return u(),T(x,{modelValue:e(t).dialog,"onUpdate:modelValue":n[5]||(n[5]=i=>e(t).dialog=i),persistent:"","max-width":"290"},{default:c(()=>[o(r,{class:"w-80"},{default:c(()=>[o(g,null,{default:c(()=>[s("span",M,p(e(t).isEdit?"Edit Vehicle":"Add Vehicle"),1)]),_:1}),o(f,null,{default:c(()=>[s("form",{onSubmit:n[4]||(n[4]=w(i=>e(t).isEdit?b():h(),["prevent"]))},[s("div",null,[s("label",q,[o(V,{class:"cursor-pointer",color:"#8B8B8B"},{default:c(()=>[B("mdi-camera")]),_:1}),s("div",null,[e(t).fileName?(u(),_("span",G,p(e(t).fileName),1)):(u(),_("p",J,"Select Image"))]),s("input",{id:"inputTag",type:"file",class:"hidden py-2",onChange:n[0]||(n[0]=i=>a(i))},null,32)]),o(N,{class:"mt-2",for:"title",value:"Title"}),o(C,{id:"title",type:"text",class:"mt-1 block w-full px-3",modelValue:e(t).form.title,"onUpdate:modelValue":n[1]||(n[1]=i=>e(t).form.title=i),autofocus:"",placeholder:"Vehicle title"},null,8,["modelValue"]),e(t).form.errors.title?(u(),_("p",K,p(e(t).form.errors.title),1)):$("",!0),o(N,{class:"mt-2",for:"title",value:"Seats"}),o(C,{id:"seats",type:"number",class:"mt-1 block w-full px-3",modelValue:e(t).form.seats,"onUpdate:modelValue":n[2]||(n[2]=i=>e(t).form.seats=i),autofocus:"",placeholder:"Vehicle seats"},null,8,["modelValue"]),e(t).form.errors.title?(u(),_("p",P,p(e(t).form.errors.title),1)):$("",!0)]),s("div",Q,[o(y,{onClick:n[3]||(n[3]=w(i=>e(t).dialog=!1,["prevent"])),type:"button",secondary:"",class:S(["w-full flex items-center justify-center mr-3",{"opacity-25":e(t).form.processing}]),disabled:e(t).form.processing},{default:c(()=>[R]),_:1},8,["class","disabled"]),o(y,{class:S(["w-full flex items-center justify-center bg-[#161515]",{"opacity-25":e(t).form.processing}]),disabled:e(t).form.processing},{default:c(()=>[B(p(e(t).isEdit?"Update":"Submit"),1)]),_:1},8,["class","disabled"])])],32)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},X={class:"flex flex-col"},Z={class:"flex flex-row justify-between items-center w-full py-2 pb-5"},ee={class:"flex space-x-2"},te={class:""},se=s("thead",{class:"bg-[#2e2c2b] text-white"},[s("tr",null,[s("th",{class:""},"Image"),s("th",{class:""},"Title"),s("th",{class:""},"Status"),s("th",{class:"w-28"},"Actions")])],-1),le=["src"],oe={class:"flex flex-row"},_e={__name:"VehicleTypes",props:{city:Array,vehicles:Array,search:Boolean},setup(d){const t=d;j({dialog:!1});const h=F({search:""}),a=A(),b=f=>{v(null,"this action will change vehicle status",null,"Yes , do it!").then(({isConfirmed:r})=>r?a.form.put(route("vehicles.status",{vehicle:f}),{preserveScroll:!0,onSuccess:()=>{}}):null)};D(f=>f==="active"?"text-green-400":"text-red-400");const{alert:v}=z(),n=f=>{v(null,"this action will delete vehicle",null,"Yes , do it!").then(({isConfirmed:r})=>r?a.form.delete(route("vehicles.delete",{id:f})):null)},g=()=>{h.get(route("vehicles",{city:t.city.id}))},V=()=>{h.search="",g()};return(f,r)=>{const x=m("VIcon"),i=m("v-btn");return u(),_(E,null,[o(e(I),{title:`${d.city.name} Vehicles`},null,8,["title"]),o(O,{isBack:"",title:`${d.city.name} Vehicles`},{default:c(()=>[s("section",X,[s("div",Z,[s("form",{onSubmit:r[2]||(r[2]=w(l=>g(),["prevent"]))},[s("div",ee,[o(C,{type:"search",class:"bg-slate-200",placeholder:"Search Vehicle...",modelValue:e(h).search,"onUpdate:modelValue":r[0]||(r[0]=l=>e(h).search=l)},null,8,["modelValue"]),s("div",te,[o(y,{type:"submit",class:"h-10 w-10 flex items-center justify-center"},{default:c(()=>[o(x,{icon:"mdi-magnify"})]),_:1})]),o(y,{type:"submit",onClick:r[1]||(r[1]=l=>V()),class:"h-10 w-10 flex items-center justify-center active:bg-slate-300",secondary:""},{default:c(()=>[o(x,{color:"black",icon:"mdi-close"})]),_:1})])],32),o(i,{onClick:r[3]||(r[3]=()=>{e(a).form.reset(),e(a).form.clearErrors(),e(a).fileName="",e(a).form.title="",e(a).form.image="",e(a).form.seats="",e(a).form.city_id=d.city.id,e(a).dialog=!0,e(a).isEdit=!1}),color:"#1D1C1C",icon:"mdi-plus",class:"text-white"})]),o(Y,{class:"border rounded"},{default:c(()=>[se,s("tbody",null,[(u(!0),_(E,null,H(d.search?d.vehicles:d.vehicles.data,l=>(u(),_("tr",{key:l.id,class:"cursor-pointer"},[s("td",null,[s("img",{class:"w-12",src:l.image,alt:""},null,8,le)]),s("td",null,p(l.title),1),s("td",null,[s("span",{class:S(["text-white px-2 rounded font-serif",l.status==="active"?"bg-green-700":"bg-red-700"])},p(l.status),3)]),s("td",oe,[o(k,{isEdit:!0,onClick:()=>{e(a).form.id=l==null?void 0:l.id,e(a).form.title=l==null?void 0:l.title,e(a).form.seats=l==null?void 0:l.seats,e(a).form.image=l==null?void 0:l.image,e(a).dialog=!0,e(a).isEdit=!0}},null,8,["onClick"]),o(k,{isStatus:l.status,onOnStatus:U=>b(l.id)},null,8,["isStatus","onOnStatus"]),o(k,{isDelete:!0,onClick:U=>n(l.id)},null,8,["onClick"])])]))),128))])]),_:1}),d.search?$("",!0):(u(),T(L,{key:0,links:d.vehicles.links},null,8,["links"]))]),o(W)]),_:1},8,["title"])],64)}}};export{_e as default};
