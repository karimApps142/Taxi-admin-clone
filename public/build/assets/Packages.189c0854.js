import{p as F,u as E,a as _,o as c,l as V,w as n,b as l,e as s,t as d,d as t,s as w,c as m,f as y,F as P,h as U,n as C,i as T,H as D}from"./app.cea855f7.js";import{_ as N}from"./Authenticated.d169710d.js";import{T as H}from"./Table.c99bc67c.js";import{_ as x}from"./Input.50e47f58.js";import{_ as h}from"./Button.06d19c4a.js";import{_ as I}from"./Select.b725302a.js";import{_ as b}from"./Actions.5787c160.js";import{u as R}from"./useAlerts.6e7215ec.js";import{_ as Y}from"./Pagination.765da988.js";const A=F("package",{state:()=>({dialog:!1,isEdit:!1,form:E({id:"",title:"",rides:"",price:"",city_id:""})})}),z={class:"text-h6"},L={key:0,class:"text-xs mx-1 mt-1 text-red-500"},M={key:0,class:"text-xs mx-1 mt-1 text-red-500"},q={key:0,class:"text-xs mx-1 mt-1 text-red-500"},G=["value"],J={class:"flex items-center justify-end mt-6"},K=s("p",{class:"text-[#161515]"},"Cancel",-1),O={__name:"AddPackage",props:{cities:Array},setup(u){const e=A(),f=()=>{e.form.post(route("packages.store"),{preserveScroll:!0,onSuccess:()=>{e.form.reset(),e.dialog=!1},onFinish:()=>{e.form.reset()}})},g=()=>{e.form.post(route("packages.update",{id:e.form.id}),{preserveScroll:!0,onSuccess:()=>{e.form.reset(),e.dialog=!1,e.isEdit=!1},onFinish:()=>{e.form.reset()}})};return($,r)=>{const k=_("v-card-title"),v=_("v-container"),p=_("v-card"),i=_("v-dialog");return c(),V(i,{modelValue:t(e).dialog,"onUpdate:modelValue":r[6]||(r[6]=a=>t(e).dialog=a),width:"400"},{default:n(()=>[l(p,null,{default:n(()=>[l(k,null,{default:n(()=>[s("span",z,d(t(e).isEdit?"Edit Package":"Add Package"),1)]),_:1}),l(v,null,{default:n(()=>[s("form",{class:"space-y-2",onSubmit:r[5]||(r[5]=w(a=>t(e).isEdit?g():f(),["prevent"]))},[s("div",null,[l(x,{id:"title",type:"text",class:"mt-1 block w-full",modelValue:t(e).form.title,"onUpdate:modelValue":r[0]||(r[0]=a=>t(e).form.title=a),autofocus:"",placeholder:"Title"},null,8,["modelValue"]),t(e).form.errors.title?(c(),m("p",L,d(t(e).form.errors.title),1)):y("",!0)]),s("div",null,[l(x,{id:"rides",type:"text",class:"mt-1 block w-full",modelValue:t(e).form.rides,"onUpdate:modelValue":r[1]||(r[1]=a=>t(e).form.rides=a),placeholder:"Rides"},null,8,["modelValue"]),t(e).form.errors.rides?(c(),m("p",M,d(t(e).form.errors.rides),1)):y("",!0)]),s("div",null,[l(x,{id:"price",type:"text",class:"mt-1 block w-full",modelValue:t(e).form.price,"onUpdate:modelValue":r[2]||(r[2]=a=>t(e).form.price=a),placeholder:"Price"},null,8,["modelValue"]),t(e).form.errors.price?(c(),m("p",q,d(t(e).form.errors.price),1)):y("",!0)]),s("div",null,[l(I,{modelValue:t(e).form.city_id,"onUpdate:modelValue":r[3]||(r[3]=a=>t(e).form.city_id=a)},{default:n(()=>[(c(!0),m(P,null,U(u.cities,a=>(c(),m("option",{key:a.id,value:a.id},d(a.name),9,G))),128))]),_:1},8,["modelValue"])]),s("div",J,[l(h,{onClick:r[4]||(r[4]=w(a=>t(e).dialog=!1,["prevent"])),type:"button",class:C(["w-full flex items-center justify-center bg-white mr-3",{"opacity-25":t(e).form.processing}]),disabled:t(e).form.processing},{default:n(()=>[K]),_:1},8,["class","disabled"]),l(h,{class:C(["w-full flex items-center justify-center bg-[#161515]",{"opacity-25":t(e).form.processing}]),disabled:t(e).form.processing},{default:n(()=>[T(d(t(e).isEdit?"Update":"Submit"),1)]),_:1},8,["class","disabled"])])],32)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Q={class:"flex flex-row justify-between items-center w-full py-2 pb-5"},W={class:"flex space-x-2"},X={class:""},Z=s("thead",null,[s("tr",{class:"bg-[#1D1C1C] text-white"},[s("th",null,"Ttile"),s("th",null,"Rides"),s("th",null,"Price"),s("th",null,"City"),s("th",null,"Status"),s("th",{class:"w-40"},"Action")])],-1),ee={class:"flex"},ce={__name:"Packages",props:{packages:Array,cities:Array,search:Boolean},setup(u){const e=A(),f=E({search:""}),{alert:g}=R(),$=p=>{g(null,"this action will delete package",null,"Yes , do it!").then(({isConfirmed:i})=>i?e.form.delete(route("packages.delete",{id:p})):null)},r=p=>{g(null,"this action will change package status",null,"Yes , do it!").then(({isConfirmed:i})=>i?e.form.put(route("packages.status",{package:p})):null)},k=()=>{f.get(route("packages"))},v=()=>{f.search="",k()};return(p,i)=>{const a=_("VIcon"),B=_("VBtn");return c(),V(N,{title:"Packages"},{default:n(()=>{var S;return[l(t(D),{title:"Packages"}),s("div",Q,[s("form",{onSubmit:i[2]||(i[2]=w(o=>k(),["prevent"]))},[s("div",W,[l(x,{type:"search",class:"bg-slate-200",placeholder:"Search Packages...",modelValue:t(f).search,"onUpdate:modelValue":i[0]||(i[0]=o=>t(f).search=o)},null,8,["modelValue"]),s("div",X,[l(h,{type:"submit",class:"h-10 w-10 flex items-center justify-center"},{default:n(()=>[l(a,{icon:"mdi-magnify"})]),_:1})]),l(h,{type:"submit",onClick:i[1]||(i[1]=o=>v()),class:"h-10 w-10 flex items-center justify-center bg-slate-200 hover:bg-slate-300 active:bg-slate-300",secondary:""},{default:n(()=>[l(a,{color:"black",icon:"mdi-close"})]),_:1})])],32),l(B,{onClick:i[3]||(i[3]=()=>{t(e).form.reset(),t(e).dialog=!0,t(e).isEdit=!1}),color:"black",icon:"mdi-plus",class:"ml-auto my-2"})]),l(H,{class:"rounded border"},{default:n(()=>[Z,s("tbody",null,[(c(!0),m(P,null,U(u.search?u.packages:u.packages.data,o=>(c(),m("tr",{key:o.id,class:"cursor-pointer"},[s("td",null,d(o.title),1),s("td",null,d(o.rides),1),s("td",null,d(o.price),1),s("td",null,d(o.city.name),1),s("td",null,[s("span",{class:C(["text-white px-2 rounded font-serif",o.status==="active"?"bg-green-700":"bg-red-700"])},d(o.status),3)]),s("td",ee,[l(b,{onClick:j=>$(o.id),isDelete:""},null,8,["onClick"]),l(b,{onClick:j=>r(o.id),isStatus:o.status},null,8,["onClick","isStatus"]),l(b,{onClick:()=>{t(e).form.id=o.id,t(e).form.title=o.title,t(e).form.rides=o.rides,t(e).form.price=o.price,t(e).form.city_id=o.city_id,t(e).isEdit=!0,t(e).dialog=!0},isEdit:""},null,8,["onClick"])])]))),128))])]),_:1}),u.search?y("",!0):(c(),V(Y,{key:0,links:(S=u.packages)==null?void 0:S.links},null,8,["links"])),l(O,{cities:u.cities},null,8,["cities"])]}),_:1})}}};export{ce as default};
