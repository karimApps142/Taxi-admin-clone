import{p as q,u as B,j as G,q as J,A as W,a as x,o as n,l as F,w as c,b as l,i as b,t as d,d as o,e as t,s as j,c as m,f,F as v,h as D,n as P,r as K,H as Q,J as X,L as Z}from"./app.cea855f7.js";import{_ as ee}from"./Authenticated.d169710d.js";import{T as oe}from"./Table.c99bc67c.js";import{_ as U}from"./Actions.5787c160.js";import{u as se}from"./useAlerts.6e7215ec.js";import{_ as le}from"./Pagination.765da988.js";import{_ as A}from"./Button.06d19c4a.js";import{_}from"./Input.50e47f58.js";import{_ as Y}from"./Select.b725302a.js";import{_ as N}from"./Checkbox.aea4881d.js";import{_ as i}from"./Label.a97b3341.js";import{h as te}from"./moment.9709ab41.js";const z=q("drivers",{state:()=>({dialog:!1,isEdit:!1,showPassword:!1,form:B({id:"",name:"",preferred_name:"",email:"",phone:"",password:"",password_confirmation:"",dob:"",resident:"",street_address:"",vehicle_id:"",city_id:"",car_company:"",car_model:"",car_color:"",vehicle_nr:"",with_chair:"",with_dog:"",with_pets:""})})}),ae={class:"flex flex-row flex-wrap space-x-3"},re={class:"flex flex-col ml-3"},ne={key:0,class:"text-xs mx-1 mt-1 text-red-500"},me={class:"flex flex-col"},de={key:0,class:"text-xs mx-1 mt-1 text-red-500"},ce={class:"flex flex-row flex-wrap space-x-3"},ie={class:"flex flex-col ml-3"},ue={key:0,class:"text-xs mx-1 mt-1 text-red-500"},fe={class:"flex flex-col"},pe={key:0,class:"text-xs mx-1 mt-1 text-red-500"},_e={key:0,class:"flex flex-row flex-wrap space-x-3"},xe={class:"flex flex-col ml-3"},he={class:"flex items-center relative"},we={key:0,class:"text-xs mx-1 mt-1 text-red-500 w-52"},ye={class:"flex flex-col"},Ve={class:"flex items-center relative"},ge={key:0,class:"text-xs mx-1 mt-1 text-red-500"},be={class:"flex flex-row flex-wrap space-x-3"},ke={class:"flex flex-col ml-3"},ve={key:0,class:"text-xs mx-1 mt-1 text-red-500"},Ce={class:"flex flex-col"},$e={key:0,class:"text-xs mx-1 mt-1 text-red-500"},Se={class:"flex flex-row flex-wrap space-x-3"},Ue={class:"flex flex-col ml-3"},De={key:0,class:"text-xs mx-1 mt-1 text-red-500"},Pe={class:"flex flex-col"},Ae=["value"],Ee={key:0,class:"text-xs mx-1 mt-1 text-red-500"},Ne={class:"flex flex-row flex-wrap space-x-3"},Be={class:"flex flex-col ml-3"},Fe=["value"],je={key:0,class:"text-xs mx-1 mt-1 text-red-500"},Me={class:"flex flex-col"},Ye={key:0,class:"text-xs mx-1 mt-1 text-red-500"},ze={class:"flex flex-row flex-wrap space-x-3"},Ie={class:"flex flex-col ml-3"},Le={key:0,class:"text-xs mx-1 mt-1 text-red-500"},Te={class:"flex flex-col"},He={key:0,class:"text-xs mx-1 mt-1 text-red-500"},Oe={class:"flex flex-row flex-wrap space-x-3"},Re={class:"flex flex-col ml-3"},qe={class:"flex flex-row flex-wrap space-x-3"},Ge={class:"flex items-center justify-end mt-6"},Je={class:"flex items-center px-2"},We={__name:"AddDriver",props:{vehicles:Array,cities:Array},setup(y){const g=y,e=z(),C=()=>{e.form.post(route("drivers.store"),{preserveScroll:!0,onSuccess:()=>{e.form.reset(),e.dialog=!1,e.isEdit=!1}})},$=()=>{e.form.put(route("drivers.update",{driver:e.form.id}),{preserveScroll:!0,onSuccess:()=>{e.form.reset(),e.dialog=!1,e.isEdit=!1}})},E=G(()=>g.vehicles.filter(p=>(p==null?void 0:p.city_id)==e.form.city_id)),S=J();return W(()=>{const p=new Date,a=new Date(p.getFullYear()-18,p.getMonth(),p.getDate()+1),k=a.getFullYear();let h=a.getMonth()+1,w=a.getDate();h<10&&(h=`0${h}`),w<10&&(w=`0${w}`),S.value=`${k}-${h}-${w}`}),(p,a)=>{const k=x("v-card-title"),h=x("v-icon"),w=x("v-container"),V=x("v-card"),u=x("v-dialog");return n(),F(u,{modelValue:o(e).dialog,"onUpdate:modelValue":a[22]||(a[22]=r=>o(e).dialog=r),persistent:"","max-width":"560"},{default:c(()=>[l(V,{class:""},{default:c(()=>[l(k,null,{default:c(()=>[b(d(o(e).isEdit?"Edit":"Add")+" Driver",1)]),_:1}),t("form",{onSubmit:a[21]||(a[21]=j(r=>o(e).isEdit?$():C(),["prevent"]))},[l(w,{class:"flex flex-col justify-center space-y-3 pt-2 pl-2"},{default:c(()=>[t("div",ae,[t("div",re,[l(i,{value:"Name"}),l(_,{class:"px-2 py-2 w-52",placeholder:"Full Name",modelValue:o(e).form.name,"onUpdate:modelValue":a[0]||(a[0]=r=>o(e).form.name=r)},null,8,["modelValue"]),o(e).form.errors.name?(n(),m("p",ne,d(o(e).form.errors.name),1)):f("",!0)]),t("div",me,[l(i,{value:"Prefered Name"}),l(_,{class:"px-2 py-2 w-52",placeholder:"Prefered Name",modelValue:o(e).form.preferred_name,"onUpdate:modelValue":a[1]||(a[1]=r=>o(e).form.preferred_name=r)},null,8,["modelValue"]),o(e).form.errors.preferred_name?(n(),m("p",de,d(o(e).form.errors.preferred_name),1)):f("",!0)])]),t("div",ce,[t("div",ie,[l(i,{value:"Email"}),l(_,{class:"px-2 py-2 w-52",placeholder:"Email",type:"email",autocomplete:"username",modelValue:o(e).form.email,"onUpdate:modelValue":a[2]||(a[2]=r=>o(e).form.email=r)},null,8,["modelValue"]),o(e).form.errors.email?(n(),m("p",ue,d(o(e).form.errors.email),1)):f("",!0)]),t("div",fe,[l(i,{value:"Phone"}),l(_,{class:"px-2 py-2 w-52",placeholder:"Phone",type:"tel",autocomplete:"phone",modelValue:o(e).form.phone,"onUpdate:modelValue":a[3]||(a[3]=r=>o(e).form.phone=r)},null,8,["modelValue"]),o(e).form.errors.phone?(n(),m("p",pe,d(o(e).form.errors.phone),1)):f("",!0)])]),o(e).isEdit?f("",!0):(n(),m("div",_e,[t("div",xe,[l(i,{value:"Password"}),t("div",he,[l(_,{class:"px-2 py-2 w-52",placeholder:"Password",type:o(e).showPassword?"text":"password",modelValue:o(e).form.password,"onUpdate:modelValue":a[4]||(a[4]=r=>o(e).form.password=r)},null,8,["type","modelValue"]),t("button",{onClick:a[5]||(a[5]=r=>o(e).showPassword=!o(e).showPassword),class:"absolute right-2"},[l(h,{color:"grey-darken-1",icon:o(e).showPassword?"mdi-eye-off":"mdi-eye"},null,8,["icon"])])]),o(e).form.errors.password?(n(),m("p",we,d(o(e).form.errors.password),1)):f("",!0)]),t("div",ye,[l(i,{value:"Confirm Password"}),t("div",Ve,[l(_,{class:"px-2 py-2 w-52",placeholder:"Confirm Password",type:o(e).showPassword?"text":"password",modelValue:o(e).form.password_confirmation,"onUpdate:modelValue":a[6]||(a[6]=r=>o(e).form.password_confirmation=r)},null,8,["type","modelValue"]),t("button",{onClick:a[7]||(a[7]=r=>o(e).showPassword=!o(e).showPassword),class:"absolute right-2"},[l(h,{color:"grey-darken-1",icon:o(e).showPassword?"mdi-eye-off":"mdi-eye"},null,8,["icon"])]),o(e).form.errors.password_confirmation?(n(),m("p",ge,d(o(e).form.errors.password_confirmation),1)):f("",!0)])])])),t("div",be,[t("div",ke,[l(i,{value:"Date of Birth"}),l(_,{class:"px-2 py-2 w-52",type:"date",id:"dob",modelValue:o(e).form.dob,"onUpdate:modelValue":a[8]||(a[8]=r=>o(e).form.dob=r),max:S.value},null,8,["modelValue","max"]),o(e).form.errors.dob?(n(),m("p",ve,d(o(e).form.errors.dob),1)):f("",!0)]),t("div",Ce,[l(i,{value:"Resident"}),l(_,{class:"px-2 py-2 w-52",placeholder:"Resident",modelValue:o(e).form.resident,"onUpdate:modelValue":a[9]||(a[9]=r=>o(e).form.resident=r)},null,8,["modelValue"]),o(e).form.errors.resident?(n(),m("p",$e,d(o(e).form.errors.resident),1)):f("",!0)])]),t("div",Se,[t("div",Ue,[l(i,{value:"Streat Address"}),l(_,{class:"px-2 py-2 w-52",placeholder:"Streat Address",modelValue:o(e).form.street_address,"onUpdate:modelValue":a[10]||(a[10]=r=>o(e).form.street_address=r)},null,8,["modelValue"]),o(e).form.errors.street_address?(n(),m("p",De,d(o(e).form.errors.street_address),1)):f("",!0)]),t("div",Pe,[l(i,{value:"Select City"}),l(Y,{modelValue:o(e).form.city_id,"onUpdate:modelValue":a[11]||(a[11]=r=>o(e).form.city_id=r),class:"px-2 py-2 w-52"},{default:c(()=>[(n(!0),m(v,null,D(g.cities,r=>(n(),m("option",{key:r.id,value:r.id},d(r.name),9,Ae))),128))]),_:1},8,["modelValue"]),o(e).form.errors.city_id?(n(),m("p",Ee,d(o(e).form.errors.city_id),1)):f("",!0)])]),t("div",Ne,[t("div",Be,[l(i,{value:"Select Vehicle"}),l(Y,{modelValue:o(e).form.vehicle_id,"onUpdate:modelValue":a[12]||(a[12]=r=>o(e).form.vehicle_id=r),class:"px-2 py-2 w-52"},{default:c(()=>[(n(!0),m(v,null,D(o(E),r=>(n(),m("option",{key:r.id,value:r.id},d(r.title),9,Fe))),128))]),_:1},8,["modelValue"]),o(e).form.errors.vehicle_id?(n(),m("p",je,d(o(e).form.errors.vehicle_id),1)):f("",!0)]),t("div",Me,[l(i,{value:"Car Company"}),l(_,{class:"px-2 py-2 w-52",placeholder:"Car Company",modelValue:o(e).form.car_company,"onUpdate:modelValue":a[13]||(a[13]=r=>o(e).form.car_company=r)},null,8,["modelValue"]),o(e).form.errors.car_company?(n(),m("p",Ye,d(o(e).form.errors.car_company),1)):f("",!0)])]),t("div",ze,[t("div",Ie,[l(i,{value:"Car Model"}),l(_,{class:"px-2 py-2 w-52",placeholder:"Car Model",modelValue:o(e).form.car_model,"onUpdate:modelValue":a[14]||(a[14]=r=>o(e).form.car_model=r)},null,8,["modelValue"]),o(e).form.errors.car_model?(n(),m("p",Le,d(o(e).form.errors.car_model),1)):f("",!0)]),t("div",Te,[l(i,{value:"Car Color"}),l(_,{class:"px-2 py-2 w-52",placeholder:"Car Color",modelValue:o(e).form.car_color,"onUpdate:modelValue":a[15]||(a[15]=r=>o(e).form.car_color=r)},null,8,["modelValue"]),o(e).form.errors.car_color?(n(),m("p",He,d(o(e).form.errors.car_color),1)):f("",!0)])]),t("div",Oe,[t("div",Re,[l(i,{value:"Vehicle No"}),l(_,{class:"px-2 py-2 w-52",placeholder:"Vehicle No",modelValue:o(e).form.vehicle_nr,"onUpdate:modelValue":a[16]||(a[16]=r=>o(e).form.vehicle_nr=r)},null,8,["modelValue"])]),l(i,{class:"flex items-center px-2 py-2 w-52 bg-gray-200 rounded-mds"},{default:c(()=>[l(N,{modelValue:o(e).form.with_chair,"onUpdate:modelValue":a[17]||(a[17]=r=>o(e).form.with_chair=r)},null,8,["modelValue"]),b(" Wheel Chair Accessible ")]),_:1})]),t("div",qe,[l(i,{class:"flex items-center px-2 py-2 w-52 bg-gray-200 rounded-md ml-3"},{default:c(()=>[l(N,{modelValue:o(e).form.with_dog,"onUpdate:modelValue":a[18]||(a[18]=r=>o(e).form.with_dog=r)},null,8,["modelValue"]),b(" Allow Guide Dogs ")]),_:1}),l(i,{class:"flex items-center px-2 py-2 w-52 bg-gray-200 rounded-md"},{default:c(()=>[l(N,{modelValue:o(e).form.with_pets,"onUpdate:modelValue":a[19]||(a[19]=r=>o(e).form.with_pets=r)},null,8,["modelValue"]),b(" Allow Pets ")]),_:1})]),t("div",Ge,[t("div",Je,[l(A,{onClick:a[20]||(a[20]=j(r=>o(e).dialog=!1,["prevent"])),type:"button",secondary:"",class:P(["w-full flex items-center justify-center mr-3",{"opacity-25":o(e).form.processing}]),disabled:o(e).form.processing},{default:c(()=>[b(" Cancel ")]),_:1},8,["class","disabled"]),l(A,{class:P(["w-full flex items-center justify-center",{"opacity-25":o(e).form.processing}]),disabled:o(e).form.processing},{default:c(()=>[b(d(o(e).isEdit?"Update":"Submit"),1)]),_:1},8,["class","disabled"])])])]),_:1})],32)]),_:1})]),_:1},8,["modelValue"])}}},Ke={class:"flex flex-col"},Qe={class:"flex"},Xe={class:"flex space-x-2"},Ze={class:"flex items-center bg-slate-200 pr-2 rounded-md focus:ring-1"},eo={class:""},oo=t("thead",null,[t("tr",{class:"bg-[#1D1C1C] text-white"},[t("th",null,"Image"),t("th",null,"Name"),t("th",null,"Email"),t("th",null,"Phone No"),t("th",null,"Vehicle No"),t("th",null,"Status"),t("th",null,"Action")])],-1),so={class:"relative"},lo=["src"],to={class:"p-2 pl-5 border-b-2 flex flex-row"},wo={__name:"Drivers",props:{drivers:Object,search:Boolean,filter:String,vehicles:Array,cities:Array},setup(y){var w;const g=y,e=z(),C=B({}),{alert:$}=se(),E=V=>{$(null,`Are you sure you want to ${V.status==="active"?"block":"unblock"} this driver`,null,"Yes , do it!").then(({isConfirmed:u})=>u?C.put(route("drivers.status.change",{user:V}),{preserveScroll:!0,onSuccess:()=>{}}):null)},S=V=>{$(null,"Are you sure you want to delete driver",null,"Yes , do it!").then(({isConfirmed:u})=>u?C.delete(route("drivers.delete",{id:V}),{preserveScroll:!0,onSuccess:()=>{}}):null)},p=B({filter:(w=g.filter)!=null?w:"",search:""}),a=()=>{p.get(route("drivers"))},k=()=>{p.search="",a()},h=K({searchBy:[{title:"Name",value:"name"},{title:"Email",value:"email"},{title:"Phone",value:"phone"},{title:"Vehicle No",value:"vehicle_nr"},{title:"Status",value:"status"}]});return(V,u)=>{const r=x("VIcon"),I=x("v-radio"),L=x("v-radio-group"),T=x("v-list"),H=x("v-menu"),O=x("VBtn");return n(),m(v,null,[l(o(Q),{title:"Drivers"}),l(ee,{title:"Drivers"},{default:c(()=>{var M;return[t("section",Ke,[t("div",Qe,[t("form",{onSubmit:u[3]||(u[3]=j(s=>a(),["prevent"])),class:"py-2"},[t("div",Xe,[t("div",Ze,[l(_,{type:"search",class:"bg-slate-200 focus:ring-0",placeholder:"Search Drivers...",modelValue:o(p).search,"onUpdate:modelValue":u[0]||(u[0]=s=>o(p).search=s)},null,8,["modelValue"]),l(H,null,{activator:c(({props:s})=>[l(r,X({icon:"mdi-filter-variant",class:"cursor-pointer"},s),null,16)]),default:c(()=>[l(T,{class:"w-40"},{default:c(()=>[l(L,{modelValue:o(p).filter,"onUpdate:modelValue":u[1]||(u[1]=s=>o(p).filter=s)},{default:c(()=>[(n(!0),m(v,null,D(h.searchBy,s=>(n(),F(I,{key:s,label:s.title,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),t("div",eo,[l(A,{type:"submit",class:"h-10 w-10 flex items-center justify-center"},{default:c(()=>[l(r,{icon:"mdi-magnify"})]),_:1})]),l(A,{type:"submit",onClick:u[2]||(u[2]=s=>k()),class:"h-10 w-10 flex items-center justify-center bg-slate-200 hover:bg-slate-300 active:bg-slate-300",secondary:""},{default:c(()=>[l(r,{color:"black",icon:"mdi-close"})]),_:1})])],32),l(O,{onClick:u[4]||(u[4]=()=>{o(e).form.reset(),o(e).isEdit=!1,o(e).dialog=!0}),icon:"mdi-plus",color:"black",class:"ml-auto"})]),l(oe,{class:"border rounded"},{default:c(()=>[oo,t("tbody",null,[(n(!0),m(v,null,D(y.search?y.drivers:y.drivers.data,s=>(n(),m("tr",{key:s.id,class:"cursor-pointer"},[t("td",so,[t("div",{class:P(`w-3 h-3 absolute top-1 z-10 rounded-full ${s.active_status==="online"?"bg-green-700":"bg-red-500"}`)},null,2),t("img",{src:s.avatar,class:"w-10 h-10 rounded-full",alt:""},null,8,lo)]),t("td",null,d(s.name),1),t("td",null,d(s.email),1),t("td",null,d(s.phone),1),t("td",null,d(s.vehicle_nr),1),t("td",null,[t("span",{class:P(["text-white px-2 rounded font-sans capitalize",s.status==="active"&&s.profile_status==="complete"?"bg-green-700":s.profile_status==="pending"||s.profile_status==="progress"?"bg-[#FFAA00]":"bg-[#FF0000]"])},d(s.profile_status==="pending"||s.profile_status==="progress"?s.profile_status:s.status),3)]),t("td",to,[l(U,{isStatus:s.status,onClick:R=>E(s)},null,8,["isStatus","onClick"]),l(U,{isDelete:!0,onClick:R=>S(s.id)},null,8,["onClick"]),l(U,{isEdit:!0,onClick:()=>{o(e).form.id=s==null?void 0:s.id,o(e).form.name=s==null?void 0:s.name,o(e).form.preferred_name=s==null?void 0:s.preferred_name,o(e).form.email=s==null?void 0:s.email,o(e).form.phone=s==null?void 0:s.phone,o(e).form.password=s==null?void 0:s.password,o(e).form.password_confirmation=s==null?void 0:s.password,o(e).form.dob=o(te)(s==null?void 0:s.dob).format("YYYY-MM-DD"),o(e).form.resident=s==null?void 0:s.resident,o(e).form.street_address=s==null?void 0:s.street_address,o(e).form.vehicle_id=s==null?void 0:s.vehicle_id,o(e).form.city_id=s==null?void 0:s.city_id,o(e).form.car_company=s==null?void 0:s.car_company,o(e).form.car_model=s==null?void 0:s.car_model,o(e).form.car_color=s==null?void 0:s.car_color,o(e).form.vehicle_nr=s==null?void 0:s.vehicle_nr,o(e).form.with_chair=s==null?void 0:s.with_chair,o(e).form.with_dog=s==null?void 0:s.with_dog,o(e).form.with_pets=s==null?void 0:s.with_pets,o(e).isEdit=!0,o(e).dialog=!0}},null,8,["onClick"]),l(o(Z),{as:"button",href:"/driver",data:{slug:s.slug}},{default:c(()=>[l(U,{isView:!0})]),_:2},1032,["data"])])]))),128))])]),_:1}),y.search?f("",!0):(n(),F(le,{key:0,links:(M=y.drivers)==null?void 0:M.links},null,8,["links"]))]),l(We,{vehicles:g.vehicles,cities:g.cities},null,8,["vehicles","cities"])]}),_:1})],64)}}};export{wo as default};
